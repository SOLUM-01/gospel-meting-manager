# 🔐 로그인 기능 테스트 가이드

## 🔧 수정 내용

### 문제점
- API를 통한 로그인 → 세션이 클라이언트에 저장되지 않음
- 로그인 후 "안녕하세요, [이름]" 표시 안 됨

### 해결방법
- **클라이언트에서 직접 Supabase 사용**
- 세션이 브라우저에 자동 저장
- 로그인 상태 실시간 반영

## 🚀 테스트 순서

### 1단계: 서버 실행
```bash
npm run dev
```

### 2단계: 회원가입
1. `http://localhost:3000/signup` 접속
2. 정보 입력:
   ```
   이름: 테스트유저
   이메일: test@example.com
   전화번호: 010-1234-5678
   비밀번호: test1234
   비밀번호 확인: test1234
   ```
3. "회원가입" 버튼 클릭
4. 로그인 페이지로 자동 이동

### 3단계: 로그인
1. `http://localhost:3000/login` 접속
2. 로그인 정보 입력:
   ```
   이메일: test@example.com
   비밀번호: test1234
   ```
3. "로그인" 버튼 클릭
4. 메인 페이지로 이동

### 4단계: 확인
로그인 후 다음이 표시되어야 합니다:

**상단 네비게이션 바:**
```
안녕하세요, 테스트유저 [로그아웃]
```

**메인 페이지 (히어로 섹션):**
```
[참여하기] [안녕하세요, 테스트유저님] [로그아웃]
```

### 5단계: 로그아웃
1. "로그아웃" 버튼 클릭
2. 즉시 로그인 전 화면으로 변경
3. 네비게이션 바: "로그인" + "회원가입" 버튼
4. 메인 페이지: "참여하기" + "회원가입" + "로그인" 버튼

## ✅ 체크리스트

- [ ] 회원가입 성공
- [ ] 로그인 성공
- [ ] 네비게이션 바에 "안녕하세요, [이름]" 표시
- [ ] 메인 페이지에 "안녕하세요, [이름]님" 표시
- [ ] 로그아웃 버튼 작동
- [ ] 로그아웃 후 로그인 버튼으로 변경
- [ ] 페이지 새로고침해도 로그인 상태 유지

## ⚙️ Supabase 설정 (중요!)

### 이메일 인증 끄기
1. https://supabase.com/dashboard 접속
2. 프로젝트 선택
3. **Authentication** > **Providers** > **Email**
4. **Confirm email** 토글 → **OFF**
5. **Save** 클릭

✅ 이렇게 해야 이메일 인증 없이 바로 로그인 가능합니다!

## 🎯 주요 변경사항

### Before (작동 안 함)
```typescript
// API 호출 방식 - 세션이 클라이언트에 저장 안 됨
const response = await fetch('/api/auth/login', {
  method: 'POST',
  body: JSON.stringify({ email, password })
})
```

### After (작동함)
```typescript
// 클라이언트에서 직접 Supabase 호출 - 세션 자동 저장
const { data, error } = await supabase.auth.signInWithPassword({
  email,
  password,
})
```

## 💡 세션 작동 원리

1. **로그인**: Supabase가 세션을 브라우저 localStorage에 저장
2. **자동 감지**: 네비게이션/메인 페이지가 세션 변경 감지
3. **UI 업데이트**: "안녕하세요, [이름]" 자동 표시
4. **로그아웃**: 세션 삭제 → UI 즉시 변경

## 🔍 문제 해결

### "안녕하세요, [이름]" 표시 안 됨
- **원인**: 이메일 인증이 활성화되어 있음
- **해결**: Supabase에서 "Confirm email" 끄기

### 로그인 후 여전히 로그인 버튼 보임
- **원인**: 페이지 새로고침 필요
- **해결**: F5 또는 Ctrl+R로 새로고침

### 로그아웃 버튼 클릭해도 변화 없음
- **원인**: 브라우저 캐시 문제
- **해결**: 브라우저 캐시 삭제 후 재시도

## 🎉 완료!

이제 이미지처럼 "안녕하세요, [이름]" 형식으로 표시됩니다!

