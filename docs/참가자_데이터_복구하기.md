# 🚑 참가자 데이터 복구하기

> 참가자 명단이 사라졌을 때 복구하는 방법!

---

## 😱 문제 상황

참가자 페이지에 2명만 보이고 나머지 59명이 사라졌어요!

**원인:** Supabase 데이터베이스에 데이터가 아직 없어요.

---

## ✅ 해결 방법 (3분 완료!)

### 1️⃣ SQL 파일 열기

프로젝트 폴더에서 이 파일을 열어주세요:

```
lib/database/migrations/insert_participants_dummy_data.sql
```

### 2️⃣ SQL 코드 복사하기

파일을 열면 엄청 긴 SQL 코드가 있어요. **전체를 복사**하세요!

```
Windows: Ctrl + A (전체 선택) → Ctrl + C (복사)
Mac: Cmd + A (전체 선택) → Cmd + C (복사)
```

### 3️⃣ Supabase 접속하기

1. 브라우저에서 [https://supabase.com](https://supabase.com) 접속
2. 로그인
3. 프로젝트 선택

### 4️⃣ SQL Editor 열기

1. 왼쪽 메뉴에서 **"SQL Editor"** 클릭
2. **"New query"** 버튼 클릭

### 5️⃣ SQL 코드 붙여넣기

1. 빈 에디터 창에 **복사한 SQL 코드를 붙여넣기**
   - Windows: `Ctrl + V`
   - Mac: `Cmd + V`

### 6️⃣ 실행하기

1. 오른쪽 아래 **"RUN"** 버튼 클릭! 🚀
2. 잠깐 기다리면... 완료! ✨

### 7️⃣ 확인하기

웹사이트로 돌아가서 **새로고침** (F5)하세요!

```
http://localhost:3000/participants
```

이제 **61명의 참가자**가 모두 보일 거예요! 🎉

---

## 📊 추가된 데이터 확인

Supabase에서 데이터가 잘 들어갔는지 확인하려면:

```sql
-- 전체 참가자 수
SELECT COUNT(*) FROM participants WHERE is_active = true;

-- 팀별 인원 수
SELECT team_category, COUNT(*) 
FROM participants 
WHERE is_active = true 
GROUP BY team_category;
```

---

## 🎯 예상 결과

### 팀별 참가자 수:
- 👥 **찬양팀**: 22명
- 🎤 **부채춤**: 9명
- 🍔 **푸드**: 5명
- 🚗 **차량물품**: 3명
- 🙏 **중보기도**: 4명
- 📢 **전도팀**: 9명
- ⭐ **목사**: 3명
- 📌 **장로**: 1명
- 🎯 **총괄팀장**: 1명
- 💇 **미용**: 3명

**총 61명!**

---

## ⚠️ 주의사항

### 데이터 중복 방지

이미 데이터가 있는데 다시 실행하면 **중복**될 수 있어요!

**기존 데이터를 지우고 다시 시작하려면:**

SQL 파일 맨 위의 주석을 해제하세요:

```sql
-- DELETE FROM participants;  ← 이 줄의 -- 를 지우기
```

그러면:
```sql
DELETE FROM participants;  ✅ 이렇게 되면 실행 시 기존 데이터가 삭제돼요
```

---

## 🔧 문제 해결

### 문제 1: "ERROR: permission denied"

**해결:** Row Level Security (RLS) 정책 때문일 수 있어요.

```sql
-- RLS 임시 비활성화 (개발 중에만!)
ALTER TABLE participants DISABLE ROW LEVEL SECURITY;

-- 데이터 추가 후 다시 활성화
ALTER TABLE participants ENABLE ROW LEVEL SECURITY;
```

### 문제 2: "ERROR: duplicate key value"

**해결:** 이미 같은 데이터가 있어요. 기존 데이터를 먼저 삭제하세요.

```sql
DELETE FROM participants;
```

### 문제 3: SQL이 너무 길어서 에러

**해결:** 한 번에 안 되면 나눠서 실행하세요.

1. 목사~전도팀 (20명) 먼저 실행
2. 찬양팀 (22명) 실행
3. 나머지 팀들 실행

---

## 💡 꿀팁

### 빠른 데이터 확인

Supabase Table Editor에서:

1. 왼쪽 메뉴 **"Table Editor"** 클릭
2. **"participants"** 테이블 클릭
3. 데이터가 표로 보여요!

### 데이터 수정하기

Table Editor에서 직접 클릭해서 수정할 수 있어요!

- 이름, 전화번호, 팀 등을 바로 고칠 수 있어요
- **"Save"** 버튼만 누르면 끝!

---

## 🎊 완료!

이제 참가자 명단이 모두 복구됐어요!

웹사이트에서 다음 기능들을 사용할 수 있어요:
- ✅ 61명 전체 명단 보기
- ✅ 이름/전화번호로 검색
- ✅ 팀별 필터링
- ✅ 상세 정보 보기

---

**만든 날짜:** 2025-11-19  
**소요 시간:** 3분  
**난이도:** ⭐ (매우 쉬움)

문제가 계속되면 알려주세요! 🙋‍♀️

