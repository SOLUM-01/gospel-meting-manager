import { createClient } from '@supabase/supabase-js'
import { config } from 'dotenv'
import { resolve } from 'path'

config({ path: resolve(process.cwd(), '.env.local') })

const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!
const supabaseKey = process.env.SUPABASE_SERVICE_ROLE_KEY!

if (!supabaseUrl || !supabaseKey) {
  console.error('❌ 환경 변수가 설정되지 않았습니다.')
  console.error('NEXT_PUBLIC_SUPABASE_URL:', supabaseUrl ? '설정됨' : '없음')
  console.error('SUPABASE_SERVICE_ROLE_KEY:', supabaseKey ? '설정됨' : '없음')
  process.exit(1)
}

const supabase = createClient(supabaseUrl, supabaseKey)

async function updatePrayerTeam() {
  console.log('🙏 중보기도팀 기도 내용 업데이트 시작...\n')

  const prayerContent = `<대만아웃리치를 위한 기도>

1. 대만 아웃리치를 통해 윈린현에 성령의 불이 일어나고 푸치교회가 날로 성장하는 교회되며 대만이 복음의 항공모함되는데 전초기지로 쓰임받길 기도합니다.

2. 대만전역에 우상들과 하나님을 대적하여 높아진 생각들은 무너지고 예수그리스도가 가장 존귀하게 되기를 기도합니다.

3. 25년 대만 윈린에서의 성탄절 복음집회를 통한 하나님의 영광이 윈린현과 대만땅에 가득하도록...

4. 25년도에 함께 참여하시는 전폭팀과 대만 스텝들모두 아웃리치현장통해 성령의 능력과 권능으로 살아계신 하나님을 한마음으로 경험하며 사도행전29장을 써나가는 은혜의 시간되길.

5. 전폭팀과 대만팀이 아웃리치 세부일정에 상호 원할한 소통과 지혜주시길.

6. 전도폭발교육을 맡은 제인량목사님에게 성령의 기름 부어주시고 윈린현에 잘 심겨지고 뿌리내려서 충성된 훈련자들과 리더쉽들이 세워지고 배가되게 하옵소서. 이를통해 평신도들도 전도의 사명을 품게 하옵소서.

7. 전도폭발팀이 준비하는 모든 과정과 대만에 오가는 모든 여정가운데 하나님의 임재와 기쁨과 사랑이 모든 팀원들에게 가득하며 영혼육이 충만하도록. 대만준비팀에도 피곤치않게하시고 동일한 성령의 은혜를 주옵소서.

8. 12월20일 크리스마스거리 마켓행사가 은혜가운데 진행되고 영혼구원의 귀한 시간이 되도록 윈린의 많은 사람들로 채워주옵소서. 준비과정부터 공연하는 동안 팀들 (부채춤 워십팀 송솔나무등)의 연합및 기쁨과 충만함이 있게하옵소서 무대설치와 당일 날씨에도 은혜베풀어 주옵소서.

9. 거리노방전도에서 꼭 만나야할 귀한 영혼들을 만나게 하시고 전폭교육이 현지교회들에게 귀한 실습이 되어지길. 또한 성령의 강력한 역사를 통해 복음의 능력을 경험하는 전도가 되길 기도합니다.

10. 정웅규선교사님께 지혜와 계시의 영으로 충만케하셔서 팀을 잘이끄는데 부족함 없으시도록. 또한 아내 임난주선교사님 12/10 윈린 성탄절집회를 위한 차세대 k-pop훈련사역을 하는데 건강지켜주시길 기도합니다. 또한 참석하는 100여명 윈린정부관료들이 예수 그리스도의 참빛을 경험하고 윈린을 섬기고 대만을 섬기게 하옵소서

11. 정회평팀장님과 권옥희총무님 그리고 각 사역팀장들에게 지혜를 주옵소서. 전폭팀모든 지체들이 은사대로 잘 조직되어 섬기며 순종의 믿음과 성령으로 연합되어 선한 열매주시길 기도합니다.

12. 참석자모두의 영육간 강건함과 안전을 지켜주시며 영적전쟁에서 승리케하옵소서. 참석자들이 자원함으로 모든 순서에 참여하며 전도의 지경과 비전을 확장시켜주옵소서.`

  const prayerContentZh = `<為台灣外展代禱>

1. 透過台灣外展，願聖靈的火降臨在雲林縣，使斗六教會日日成長，台灣成為福音航空母艦的前哨基地。

2. 願台灣全地的偶像和抵擋神的高傲思想都被拆毀，耶穌基督被高舉為至尊。

3. 願25年台灣雲林聖誕福音聚會中，神的榮耀充滿雲林縣和台灣全地...

4. 願25年所有參與的福音爆炸團隊和台灣同工，透過外展現場經歷聖靈的能力和權柄，同心經歷活神，寫下使徒行傳29章的恩典時刻。

5. 願福音爆炸團隊和台灣團隊在外展詳細行程中有良好溝通和智慧。

6. 願負責福音爆炸教育的詹姜牧師被聖靈膏抹，在雲林縣紮根，建立忠心的訓練者和領袖，使他們倍增。願平信徒也能擁抱傳福音的使命。

7. 願福音爆炸團隊在所有準備過程和往返台灣的旅程中，神的同在、喜樂和愛充滿所有團隊成員，身心靈都得滿足。也願台灣準備團隊不疲憊，得到同樣的聖靈恩典。

8. 願12月20日聖誕街頭市集活動在恩典中進行，成為寶貴的靈魂救贖時刻，雲林許多人參加。願從準備到表演期間，各團隊（扇子舞、敬拜團、松樹等）合一、喜樂、滿足。願舞台搭建和當天天氣都蒙恩。

9. 願在街頭佈道中遇見必須遇見的寶貴靈魂，願福音爆炸教育成為當地教會寶貴的實習。願透過聖靈的強大作為，經歷福音的能力。

10. 願鄭雄圭宣教士充滿智慧和啟示的靈，足以帶領團隊。願妻子林蘭珠宣教士在12/10雲林聖誕聚會的下一代k-pop訓練事工中保持健康。願參加的100多位雲林政府官員經歷耶穌基督的真光，服事雲林和台灣。

11. 願鄭會平隊長和權玉熙總務以及各事工隊長得到智慧。願福音爆炸團隊所有肢體按恩賜組織服事，以順服的信心和聖靈合一，結出美好果子。

12. 願守護所有參加者的身心靈健康和安全，在屬靈爭戰中得勝。願參加者甘心樂意參與所有程序，擴展傳福音的境界和異象。`

  try {
    // 중보기도팀 업데이트
    const { data, error } = await supabase
      .from('tasks')
      .update({
        description: prayerContent,
        description_zh: prayerContentZh
      })
      .eq('id', 'e7f6a749-f907-4556-a43b-9fa248ec6730')
      .select()

    if (error) {
      console.error('❌ 업데이트 실패:', error)
      process.exit(1)
    }

    console.log('✅ 중보기도팀 기도 내용 업데이트 완료!')
    console.log('\n업데이트된 내용:')
    console.log('- 제목:', data[0]?.title)
    console.log('- Description 길이:', prayerContent.length, '자')
    console.log('- Description (중문) 길이:', prayerContentZh.length, '자')
    
    console.log('\n✨ 완료! 웹사이트에서 확인하세요.')

  } catch (error) {
    console.error('❌ 오류 발생:', error)
    process.exit(1)
  }
}

updatePrayerTeam()

